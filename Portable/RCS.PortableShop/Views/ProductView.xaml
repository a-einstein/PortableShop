<?xml version="1.0" encoding="UTF-8"?>

<BaseClasses:ImplicitModelView
    x:Class="RCS.PortableShop.Views.ProductView"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:BaseClasses="clr-namespace:RCS.PortableShop.Common.Views;assembly=RCS.PortableShop.Common"
    xmlns:ViewModels="clr-namespace:RCS.PortableShop.ViewModels;assembly=RCS.PortableShop"
    xmlns:Controls="clr-namespace:RCS.PortableShop.Common.Controls;assembly=RCS.PortableShop.Common"
    xmlns:Converters="clr-namespace:RCS.PortableShop.Common.Converters;assembly=RCS.PortableShop.Common"
    xmlns:Localization="clr-namespace:RCS.PortableShop.Localization;assembly=RCS.PortableShop"
    BackgroundColor="{DynamicResource ProductsLevel1Colour}"
    Padding="{DynamicResource ViewPadding}"
    >

    <BaseClasses:View.ViewModel>
        <ViewModels:ProductViewModel/>
    </BaseClasses:View.ViewModel>

    <BaseClasses:View.Resources>
        <ResourceDictionary>
            <!--<Converters:CategoriesFormatter x:Key="CategoriesFormatter"/>-->
            <!--<Converters:SizeFormatter x:Key="SizeFormatter"/>-->
            <!--<Converters:WeightFormatter x:Key="WeightFormatter"/>-->
            <Converters:ByteArrayToImageSourceConverter x:Key="ByteArrayToImageSourceConverter"/>
        </ResourceDictionary>
    </BaseClasses:View.Resources>

    <!--Have an outermost ScrollView to keep all controls accessible.-->
    <ScrollView>
        <!--TODO Get VerticalOptions of this part really working (reducing margins).-->
        <!--Note this Orientation may be changed depending on screen orientation. Assume Vertical.-->
        <StackLayout x:Name="productControl" Orientation="Vertical" VerticalOptions="Start">
            <StackLayout VerticalOptions="Start">
                <Controls:ContentButton Command="{Binding PhotoCommand}" CommandParameter="{Binding Source, Source={x:Reference imageControl}}" VerticalOptions="Start" HorizontalOptions="Start">
                    <Controls:ContentButton.Content>
                        <Image x:Name="imageControl" Source="{Binding Item.LargePhoto, Converter={StaticResource ByteArrayToImageSourceConverter}}" WidthRequest="240" HeightRequest="240"/>
                    </Controls:ContentButton.Content>
                </Controls:ContentButton>

                <Button Text="{Localization:Translate IncreaseProduct}" Command="{Binding CartCommand}" CommandParameter="{Binding Item}" Style="{DynamicResource CartButtonStyle}" VerticalOptions="Start"/>
            </StackLayout>

            <Grid VerticalOptions="Start">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Text="{Localization:Translate Category}" Style="{DynamicResource LabelLabelStyle}"/>
                <StackLayout Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                    <Label Text="{Binding Item.ProductCategory}" Style="{DynamicResource ValueLabelStyle}"/>
                    <Label Text="/" Style="{DynamicResource ValueLabelStyle}"/>
                    <Label Text="{Binding Item.ProductSubcategory}" Style="{DynamicResource ValueLabelStyle}"/>
                </StackLayout>

                <Label Grid.Row="1" Grid.Column="0" Text="{Localization:Translate Model}" Style="{DynamicResource LabelLabelStyle}"/>
                <Label Grid.Row="1" Grid.Column="1" Text="{Binding Item.ModelName}" Style="{DynamicResource ValueLabelStyle}"/>

                <Label Grid.Row="2" Grid.Column="0" Text="{Localization:Translate Name}" Style="{DynamicResource LabelLabelStyle}"/>
                <Label Grid.Row="2" Grid.Column="1" Text="{Binding Item.Name}" Style="{DynamicResource ValueEmphasisMediumLabelStyle}"/>

                <Label Grid.Row="3" Grid.Column="0" Text="{Localization:Translate Id}" Style="{DynamicResource LabelLabelStyle}"/>
                <Label Grid.Row="3" Grid.Column="1" Text="{Binding Item.ProductNumber}" Style="{DynamicResource ValueLabelStyle}"/>

                <Label Grid.Row="4" Grid.Column="0" Text="{Localization:Translate Price}" Style="{DynamicResource LabelLabelStyle}"/>
                <Label Grid.Row="4" Grid.Column="1" Text="{Binding Item.ListPrice, StringFormat=\{0:C2\}}" Style="{DynamicResource ValueEmphasisLabelStyle}"/>

                <Label Grid.Row="5" Grid.Column="0" Text="{Localization:Translate Size}" Style="{DynamicResource LabelLabelStyle}"/>
                <StackLayout Grid.Row="5" Grid.Column="1" Orientation="Horizontal">
                    <Label Text="{Binding Item.Size}" Style="{DynamicResource ValueLabelStyle}"/>
                    <Label Text="{Binding Item.SizeUnitMeasureCode}" Style="{DynamicResource ValueLabelStyle}"/>
                </StackLayout>

                <Label Grid.Row="6" Grid.Column="0" Text="{Localization:Translate Weight}" Style="{DynamicResource LabelLabelStyle}"/>
                <StackLayout Grid.Row="6" Grid.Column="1" Orientation="Horizontal">
                    <Label Text="{Binding Item.Weight}" Style="{DynamicResource ValueLabelStyle}"/>
                    <Label Text="{Binding Item.WeightUnitMeasureCode}" Style="{DynamicResource ValueLabelStyle}"/>
                </StackLayout>

                <Label Grid.Row="7" Grid.Column="0" Text="{Localization:Translate Colour}" Style="{DynamicResource LabelLabelStyle}"/>
                <Label Grid.Row="7" Grid.Column="1" Text="{Binding Item.Color}" Style="{DynamicResource ValueLabelStyle}"/>

                <Label Grid.Row="8" Grid.Column="0" Text="{Localization:Translate Description}" Style="{DynamicResource LabelLabelStyle}"/>
                <Label Grid.Row="8" Grid.Column="1" Text="{Binding Item.Description}" Style="{DynamicResource ValueLabelStyle}"/>
            </Grid>
        </StackLayout>
    </ScrollView>
</BaseClasses:ImplicitModelView>
